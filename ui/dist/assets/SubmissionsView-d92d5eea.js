import{d as h,_ as f,o as i,c as r,e,t as n,F as g,i as y,j as p,u as S,k as $,r as C,l as k,v as P,h as I,m as D,p as V,g as j}from"./index-b61cccbc.js";const T=h({props:{submission:{type:Object,required:!0}}}),x={class:"p-2"},B={class:"font-semibold"};function M(s,o,u,m,c,_){return i(),r("div",null,[e("div",x,[e("div",null," Submitted by "+n(s.submission.user_name),1),e("div",null," on "+n(s.submission.formatted_date)+" at "+n(s.submission.formatted_time),1)]),(i(!0),r(g,null,y(s.submission.fields,a=>(i(),r("div",{key:a.id,class:"p-2"},[e("div",B,n(a.display_title),1),e("div",null,n(a.value),1)]))),128))])}const N=f(T,[["render",M]]),E=h({components:{SubmissionCard:N},data(){return{slashCommand:{}.VITE_SLASH_COMMAND}},setup(){const s=p("csv"),o=p([]),u=p(1),m=p(10),c=p(1),a=S().query.formId,t=()=>{const l=s.value==="csv"?"/export-submissions-csv":"/export-submissions-xlsx";window.location.href=l},v=async()=>{const l=await fetch(`/api/v1/submissions?formId=${a}&page=${u.value}&per_page=${m.value}`);if(l.ok){const b=await l.json();o.value=b.submissions,c.value=b.last_page}},w=l=>{u.value=l,v()};return $(()=>{v()}),{exportType:s,submissions:o,downloadData:t,page:u,lastPage:c,changePage:w}}});const d=s=>(V("data-v-b9c92213"),s=s(),j(),s),F={class:"flex justify-around"},L=d(()=>e("span",null," Export as ",-1)),O=d(()=>e("option",{value:"csv"},"CSV",-1)),q=d(()=>e("option",{value:"xlsx"},"XLSX",-1)),A=[O,q],U={class:"flex flex-wrap justify-center place-content-evenly"},X={key:0,class:"mygrid-item opacity-75 p-7 rounded-xl shadow-md w-full md:w-1/3 lg:w-1/4 p-4"},H=d(()=>e("div",{class:"p-1"}," There are no submissions for this form. ",-1)),R=d(()=>e("div",{class:"p-1"}," Schedule the form in slack by running: ",-1)),z={class:"p-1 code"},G=d(()=>e("div",{class:"p-1"},' and then pressing "Schedule". ',-1)),J=d(()=>e("div",{class:"p-1"},' Or fill it without scheduling by pressing "Fill now". ',-1)),K={class:"flex justify-center"},Q={class:"m-3"},W=["disabled"],Y={class:"p-3"},Z=["disabled"];function ss(s,o,u,m,c,_){const a=C("SubmissionCard");return i(),r("div",null,[e("div",F,[e("div",null,[L,k(e("select",{name:"export",id:"export",class:"p-2 m-1 rounded-md shadow","onUpdate:modelValue":o[0]||(o[0]=t=>s.exportType=t)},A,512),[[P,s.exportType]]),e("button",{id:"download-btn",class:"mybutton p-2 m-1 rounded",onClick:o[1]||(o[1]=(...t)=>s.downloadData&&s.downloadData(...t))}," Download ")])]),e("div",U,[(i(!0),r(g,null,y(s.submissions,t=>(i(),D(a,{key:t.id,submission:t},null,8,["submission"]))),128)),s.submissions.length?I("",!0):(i(),r("div",X,[H,R,e("div",z," /"+n(s.slashCommand)+" list ",1),G,J]))]),e("div",K,[e("div",Q,[e("button",{disabled:s.page===1,onClick:o[2]||(o[2]=t=>s.changePage(s.page-1)),class:"p-3"}," Previous ",8,W),e("span",Y," Page "+n(s.page)+" of "+n(s.lastPage),1),e("button",{disabled:s.page===s.lastPage,onClick:o[3]||(o[3]=t=>s.changePage(s.page+1)),class:"p-3"}," Next ",8,Z)])])])}const os=f(E,[["render",ss],["__scopeId","data-v-b9c92213"]]);export{os as default};
