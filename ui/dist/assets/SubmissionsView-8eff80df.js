import{d as b,_ as f,o as a,c as u,e,t,F as g,i as y,j as r,u as S,k,r as C,l as P,v as I,h as j,m as D,p as V,g as x}from"./index-0ab390d7.js";const B=b({props:{submission:{type:Object,required:!0}}}),T={class:"p-2"},F={class:"font-semibold"};function N(s,o,p,c,v,m){return a(),u("div",null,[e("div",T,[e("div",null," Submitted by "+t(s.submission.user_name),1),e("div",null," on "+t(s.submission.formatted_date)+" at "+t(s.submission.formatted_time),1)]),(a(!0),u(g,null,y(s.submission.fields,d=>(a(),u("div",{key:d.id,class:"p-2"},[e("div",F,t(d.display_title),1),e("div",null,t(d.value),1)]))),128))])}const q=f(B,[["render",N]]),E=b({components:{SubmissionCard:q},setup(){const s=r("forminder"),o=r("csv"),p=r([]),c=r(1),v=r(10),m=r(1),n=S().query.formId,w=()=>{const l=o.value==="csv"?"/export-submissions-csv":"/export-submissions-xlsx";window.location.href=l},_=async()=>{const l=await fetch(`/api/v1/submissions?formId=${n}&page=${c.value}&per_page=${v.value}`);if(l.ok){const h=await l.json();p.value=h.submissions,m.value=h.last_page}},$=l=>{c.value=l,_()};return k(()=>{_()}),{slashCommand:s,exportType:o,submissions:p,downloadData:w,page:c,lastPage:m,changePage:$}}});const i=s=>(V("data-v-a8aeda3c"),s=s(),x(),s),L={class:"flex justify-around"},M=i(()=>e("span",null," Export as ",-1)),O=i(()=>e("option",{value:"csv"},"CSV",-1)),U=i(()=>e("option",{value:"xlsx"},"XLSX",-1)),X=[O,U],R={class:"flex flex-wrap justify-center place-content-evenly"},z={key:0,class:"mygrid-item opacity-75 p-7 rounded-xl shadow-md w-full md:w-1/3 lg:w-1/4 p-4"},A=i(()=>e("div",{class:"p-1"}," There are no submissions for this form. ",-1)),G=i(()=>e("div",{class:"p-1"}," Schedule the form in slack by running: ",-1)),H={class:"p-1 code"},J=i(()=>e("div",{class:"p-1"},' and then pressing "Schedule". ',-1)),K=i(()=>e("div",{class:"p-1"},' Or fill it without scheduling by pressing "Fill now". ',-1)),Q={class:"flex justify-center"},W={class:"m-3"},Y=["disabled"],Z={class:"p-3"},ss=["disabled"];function es(s,o,p,c,v,m){const d=C("SubmissionCard");return a(),u("div",null,[e("div",L,[e("div",null,[M,P(e("select",{name:"export",id:"export",class:"p-2 m-1 rounded-md shadow","onUpdate:modelValue":o[0]||(o[0]=n=>s.exportType=n)},X,512),[[I,s.exportType]]),e("button",{id:"download-btn",class:"mybutton p-2 m-1 rounded",onClick:o[1]||(o[1]=(...n)=>s.downloadData&&s.downloadData(...n))}," Download ")])]),e("div",R,[(a(!0),u(g,null,y(s.submissions,n=>(a(),D(d,{key:n.id,submission:n},null,8,["submission"]))),128)),s.submissions.length?j("",!0):(a(),u("div",z,[A,G,e("div",H," /"+t(s.slashCommand)+" list ",1),J,K]))]),e("div",Q,[e("div",W,[e("button",{disabled:s.page===1,onClick:o[2]||(o[2]=n=>s.changePage(s.page-1)),class:"p-3"}," Previous ",8,Y),e("span",Z," Page "+t(s.page)+" of "+t(s.lastPage),1),e("button",{disabled:s.page===s.lastPage,onClick:o[3]||(o[3]=n=>s.changePage(s.page+1)),class:"p-3"}," Next ",8,ss)])])])}const ns=f(E,[["render",es],["__scopeId","data-v-a8aeda3c"]]);export{ns as default};
