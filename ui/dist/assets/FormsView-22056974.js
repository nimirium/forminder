import{a as h}from"./config-9d7f0f6c.js";import{d as f,l as y,_ as w,r as v,o as t,c as a,h as n,F as u,i as m,e as s,t as r,b as l,w as d,f as c,p as k,g as b}from"./index-25e6ba79.js";const $=f({name:"FormsView",data(){const e=parseInt(this.$route.query.page,10)||1,o=parseInt(this.$route.query.per_page,10)||10;return{loading:!0,forms:[],page:e,per_page:o,total:0,last_page:1,slashCommand:"forminder"}},methods:{async fetchForms(){this.loading=!0;try{const e=await fetch(h+`/api/v1/forms?page=${this.page}&per_page=${this.per_page}`);if(e.status===401){y();return}if(!e.ok)throw this.loading=!1,new Error("Network response was not ok");const o=await e.json();this.forms=o.forms,this.page=o.page,this.per_page=o.per_page,this.total=o.total,this.loading=!1,this.last_page=Math.floor(this.total/this.per_page)+(this.total%this.per_page>0?1:0)}catch(e){console.error(e),this.loading=!1}}},watch:{$route:{async handler(){this.page=parseInt(this.$route.query.page,10)||1,this.per_page=parseInt(this.$route.query.per_page,10)||10,await this.fetchForms()},immediate:!0}}});const _=e=>(k("data-v-9994a031"),e=e(),b(),e),F=_(()=>s("div",{class:"w-full text-3xl text-center p-5"},[s("span",{class:"text-3xl"},"Forms")],-1)),I={key:0,class:"loading-indicator"},q={key:1,class:"flex flex-wrap justify-center place-content-evenly"},C={class:"font-semibold text-xl p-1"},V={class:"p-1"},N={class:"p-1"},S={class:"list-disc pl-5"},L={class:"font-semibold p-1"},j={class:"bg-greenish rounded-xl p-3 my-2 font-bold shadow-md",style:{color:"#ffffff"}},B={key:0,class:"mygrid-item opacity-75 p-7 rounded-xl shadow-md w-full md:w-1/3 lg:w-1/4 p-4"},x=_(()=>s("div",{class:"p-1"},"You don't have any forms.",-1)),E=_(()=>s("div",{class:"p-1"},"Create a form in slack by running:",-1)),P={class:"p-1 code"},D={key:2,class:"flex justify-center"},M={class:"m-3"},R={class:"p-3"};function T(e,o,U,Y,z,A){const p=v("router-link");return t(),a("div",null,[F,e.loading?(t(),a("div",I," Loading... ")):n("",!0),e.loading?n("",!0):(t(),a("div",q,[(t(!0),a(u,null,m(e.forms,i=>(t(),a("div",{key:i.id,class:"mygrid-item opacity-75 p-7 rounded-xl shadow-md w-full md:w-1/3 lg:w-1/4 p-4 max-w-lg p-5 m-5"},[s("div",C,r(i.name),1),s("div",V,"Created by "+r(i.user_name),1),s("div",N,[s("ul",S,[(t(!0),a(u,null,m(i.fields,g=>(t(),a("li",{key:g.id},r(g.title),1))),128))])]),s("div",L," Submissions: "+r(i.number_of_submissions),1),s("button",j,[l(p,{to:`/submissions?formId=${i.id}`},{default:d(()=>[c("View submissions")]),_:2},1032,["to"])])]))),128)),!e.loading&&e.forms.length===0?(t(),a("div",B,[x,E,s("div",P,"/"+r(e.slashCommand)+" create",1)])):n("",!0)])),e.loading?n("",!0):(t(),a("div",D,[s("div",M,[e.page>1?(t(),a(u,{key:0},[l(p,{to:{name:"forms",query:{page:1,per_page:e.per_page}},class:"p-3 underline"},{default:d(()=>[c("First ")]),_:1},8,["to"]),l(p,{to:{name:"forms",query:{page:e.page-1,per_page:e.per_page}},class:"p-3 underline"},{default:d(()=>[c("Previous ")]),_:1},8,["to"])],64)):n("",!0),s("span",R," Page "+r(e.page)+" of "+r(e.last_page),1),e.page<e.last_page?(t(),a(u,{key:1},[l(p,{to:{name:"forms",query:{page:e.page+1,per_page:e.per_page}},class:"p-3 underline"},{default:d(()=>[c("Next ")]),_:1},8,["to"]),l(p,{to:{name:"forms",query:{page:e.last_page,per_page:e.per_page}},class:"p-3 underline"},{default:d(()=>[c("Last ")]),_:1},8,["to"])],64)):n("",!0)])]))])}const J=w($,[["render",T],["__scopeId","data-v-9994a031"]]);export{J as default};
