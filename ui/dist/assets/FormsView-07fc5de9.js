import{a as m}from"./config-9d7f0f6c.js";import{d as f,_ as y,r as w,o as t,c as a,h as n,F as u,i as h,e as s,t as r,b as l,w as d,f as c,p as v,g as b}from"./index-741b0eb6.js";const k=f({name:"FormsView",data(){const e=parseInt(this.$route.query.page,10)||1,o=parseInt(this.$route.query.per_page,10)||10;return{loading:!0,forms:[],page:e,per_page:o,total:0,last_page:1,slashCommand:"forminder"}},methods:{async fetchForms(){this.loading=!0;try{const e=await fetch(m+`/api/v1/forms?page=${this.page}&per_page=${this.per_page}`);if(e.status===401){window.location.href="/login";return}if(!e.ok)throw this.loading=!1,new Error("Network response was not ok");const o=await e.json();this.forms=o.forms,this.page=o.page,this.per_page=o.per_page,this.total=o.total,this.loading=!1,this.last_page=Math.floor(this.total/this.per_page)+(this.total%this.per_page>0?1:0)}catch(e){console.error(e),this.loading=!1}}},watch:{$route:{async handler(){this.page=parseInt(this.$route.query.page,10)||1,this.per_page=parseInt(this.$route.query.per_page,10)||10,await this.fetchForms()},immediate:!0}}});const _=e=>(v("data-v-a317bc35"),e=e(),b(),e),$=_(()=>s("div",{class:"w-full text-3xl text-center p-5"},[s("span",{class:"text-3xl"},"Forms")],-1)),F={key:0,class:"loading-indicator"},I={key:1,class:"flex flex-wrap justify-center place-content-evenly"},q={class:"font-semibold text-xl p-1"},C={class:"p-1"},V={class:"p-1"},N={class:"list-disc pl-5"},S={class:"font-semibold p-1"},L={class:"bg-greenish rounded-xl p-3 my-2 font-bold shadow-md",style:{color:"#ffffff"}},j={key:0,class:"mygrid-item opacity-75 p-7 rounded-xl shadow-md w-full md:w-1/3 lg:w-1/4 p-4"},B=_(()=>s("div",{class:"p-1"},"You don't have any forms.",-1)),x=_(()=>s("div",{class:"p-1"},"Create a form in slack by running:",-1)),E={class:"p-1 code"},P={key:2,class:"flex justify-center"},D={class:"m-3"},M={class:"p-3"};function R(e,o,T,U,Y,z){const p=w("router-link");return t(),a("div",null,[$,e.loading?(t(),a("div",F," Loading... ")):n("",!0),e.loading?n("",!0):(t(),a("div",I,[(t(!0),a(u,null,h(e.forms,i=>(t(),a("div",{key:i.id,class:"mygrid-item opacity-75 p-7 rounded-xl shadow-md w-full md:w-1/3 lg:w-1/4 p-4 max-w-lg p-5 m-5"},[s("div",q,r(i.name),1),s("div",C,"Created by "+r(i.user_name),1),s("div",V,[s("ul",N,[(t(!0),a(u,null,h(i.fields,g=>(t(),a("li",{key:g.id},r(g.title),1))),128))])]),s("div",S," Submissions: "+r(i.number_of_submissions),1),s("button",L,[l(p,{to:`/submissions?formId=${i.id}`},{default:d(()=>[c("View submissions")]),_:2},1032,["to"])])]))),128)),!e.loading&&e.forms.length===0?(t(),a("div",j,[B,x,s("div",E,"/"+r(e.slashCommand)+" create",1)])):n("",!0)])),e.loading?n("",!0):(t(),a("div",P,[s("div",D,[e.page>1?(t(),a(u,{key:0},[l(p,{to:{name:"forms",query:{page:1,per_page:e.per_page}},class:"p-3 underline"},{default:d(()=>[c("First ")]),_:1},8,["to"]),l(p,{to:{name:"forms",query:{page:e.page-1,per_page:e.per_page}},class:"p-3 underline"},{default:d(()=>[c("Previous ")]),_:1},8,["to"])],64)):n("",!0),s("span",M," Page "+r(e.page)+" of "+r(e.last_page),1),e.page<e.last_page?(t(),a(u,{key:1},[l(p,{to:{name:"forms",query:{page:e.page+1,per_page:e.per_page}},class:"p-3 underline"},{default:d(()=>[c("Next ")]),_:1},8,["to"]),l(p,{to:{name:"forms",query:{page:e.last_page,per_page:e.per_page}},class:"p-3 underline"},{default:d(()=>[c("Last ")]),_:1},8,["to"])],64)):n("",!0)])]))])}const H=y(k,[["render",R],["__scopeId","data-v-a317bc35"]]);export{H as default};
