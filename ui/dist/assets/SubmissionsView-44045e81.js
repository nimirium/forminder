import{d as h,_ as f,o as a,c as r,e,t as n,F as g,i as y,j as p,u as $,k as S,r as k,l as C,v as P,h as I,m as j,p as D,g as V}from"./index-690ed05e.js";const x=h({props:{submission:{type:Object,required:!0}}}),B={class:"p-2"},T={class:"font-semibold"};function F(s,o,u,m,c,v){return a(),r("div",null,[e("div",B,[e("div",null," Submitted by "+n(s.submission.user_name),1),e("div",null," on "+n(s.submission.formatted_date)+" at "+n(s.submission.formatted_time),1)]),(a(!0),r(g,null,y(s.submission.fields,i=>(a(),r("div",{key:i.id,class:"p-2"},[e("div",T,n(i.display_title),1),e("div",null,n(i.value),1)]))),128))])}const N=f(x,[["render",F]]),q=h({components:{SubmissionCard:N},data(){return{slashCommand:"forminder"}},setup(){const s=p("csv"),o=p([]),u=p(1),m=p(10),c=p(1),i=$().query.formId,t=()=>{const l=s.value==="csv"?"/export-submissions-csv":"/export-submissions-xlsx";window.location.href=l},_=async()=>{const l=await fetch(`/api/v1/submissions?formId=${i}&page=${u.value}&per_page=${m.value}`);if(l.ok){const b=await l.json();o.value=b.submissions,c.value=b.last_page}},w=l=>{u.value=l,_()};return S(()=>{_()}),{exportType:s,submissions:o,downloadData:t,page:u,lastPage:c,changePage:w}}});const d=s=>(D("data-v-b9c92213"),s=s(),V(),s),E={class:"flex justify-around"},L=d(()=>e("span",null," Export as ",-1)),M=d(()=>e("option",{value:"csv"},"CSV",-1)),O=d(()=>e("option",{value:"xlsx"},"XLSX",-1)),U=[M,O],X={class:"flex flex-wrap justify-center place-content-evenly"},R={key:0,class:"mygrid-item opacity-75 p-7 rounded-xl shadow-md w-full md:w-1/3 lg:w-1/4 p-4"},z=d(()=>e("div",{class:"p-1"}," There are no submissions for this form. ",-1)),A=d(()=>e("div",{class:"p-1"}," Schedule the form in slack by running: ",-1)),G={class:"p-1 code"},H=d(()=>e("div",{class:"p-1"},' and then pressing "Schedule". ',-1)),J=d(()=>e("div",{class:"p-1"},' Or fill it without scheduling by pressing "Fill now". ',-1)),K={class:"flex justify-center"},Q={class:"m-3"},W=["disabled"],Y={class:"p-3"},Z=["disabled"];function ss(s,o,u,m,c,v){const i=k("SubmissionCard");return a(),r("div",null,[e("div",E,[e("div",null,[L,C(e("select",{name:"export",id:"export",class:"p-2 m-1 rounded-md shadow","onUpdate:modelValue":o[0]||(o[0]=t=>s.exportType=t)},U,512),[[P,s.exportType]]),e("button",{id:"download-btn",class:"mybutton p-2 m-1 rounded",onClick:o[1]||(o[1]=(...t)=>s.downloadData&&s.downloadData(...t))}," Download ")])]),e("div",X,[(a(!0),r(g,null,y(s.submissions,t=>(a(),j(i,{key:t.id,submission:t},null,8,["submission"]))),128)),s.submissions.length?I("",!0):(a(),r("div",R,[z,A,e("div",G," /"+n(s.slashCommand)+" list ",1),H,J]))]),e("div",K,[e("div",Q,[e("button",{disabled:s.page===1,onClick:o[2]||(o[2]=t=>s.changePage(s.page-1)),class:"p-3"}," Previous ",8,W),e("span",Y," Page "+n(s.page)+" of "+n(s.lastPage),1),e("button",{disabled:s.page===s.lastPage,onClick:o[3]||(o[3]=t=>s.changePage(s.page+1)),class:"p-3"}," Next ",8,Z)])])])}const os=f(q,[["render",ss],["__scopeId","data-v-b9c92213"]]);export{os as default};
